(this["webpackJsonptiempo21-react"]=this["webpackJsonptiempo21-react"]||[]).push([[0],{14:function(e,t,n){e.exports={newsGrid:"NewsGrid_newsGrid__1f2Ay",loadMoreButton:"NewsGrid_loadMoreButton__1axxA",btnEnable:"NewsGrid_btnEnable__2LKgf",btnDisable:"NewsGrid_btnDisable__DRyYT"}},15:function(e,t,n){e.exports={searchContainer:"Search_searchContainer__3zXIn",searchBox:"Search_searchBox__2e2o5",searchButton:"Search_searchButton__26uDe",searchInput:"Search_searchInput__2uLKN"}},18:function(e,t,n){e.exports={title:"App_title__-GfWs",siteContainer:"App_siteContainer__VZkNZ",footer:"App_footer__29Fsv"}},19:function(e,t,n){e.exports={detailsContainer:"NewDetails_detailsContainer__29sGA",imageContainer:"NewDetails_imageContainer__36Ay6",meta:"NewDetails_meta__InY4e"}},20:function(e,t,n){e.exports={newCard:"NewCard_newCard__2gsec",newImage:"NewCard_newImage__KUeBI",date:"NewCard_date__K9sxS"}},23:function(e,t,n){e.exports={spinner:"Spinner_spinner__1XGpJ",spinning:"Spinner_spinning__3-n4e"}},25:function(e,t,n){e.exports={errorContainer:"Error_errorContainer__3Vt-q"}},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n(29),c=n.n(s),r=n(18),i=n.n(r),o=n(9),j=n(3),l=n(13),d=n(16),b=n(23),u=n.n(b),h=n(1);function O(){return Object(h.jsx)("div",{className:u.a.spinner,children:Object(h.jsx)(d.b,{className:u.a.spinning,size:60})})}var x=n(19),_=n.n(x),p=n(24),m=n.n(p),f=n(30),g=n(8);function w(e){var t=Object(a.useState)(1),n=Object(g.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(null),i=Object(g.a)(r,2),o=i[0],j=i[1],l=Object(a.useState)([]),d=Object(g.a)(l,2),b=d[0],u=d[1],h=Object(a.useState)(!1),O=Object(g.a)(h,2),x=O[0],_=O[1],p="https://www.tiempo21.cu/wp-json/wp/v2/"+e;return Object(a.useEffect)((function(){_(!0),function(){var e=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p).then((function(e){if(!e.ok)throw Error("Ups... Lo sentimos, al parecer el servicio de noticias no est\xe1 funcionando.");return c(e.headers.get("x-wp-totalpages")),e.json()})).then((function(e){u(e),_(!1),j(null)})).catch((function(e){u([]),_(!1),j(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[p]),{newsList:b,error:o,isLoading:x,totalPages:s}}var v=n(25),N=n.n(v);function C(e){var t=e.err;return"Failed to fetch"===t?Object(h.jsx)("div",{className:N.a.errorContainer,children:Object(h.jsx)("div",{children:Object(h.jsxs)("span",{children:["No se pudo conectar con la web de noticias. ",Object(h.jsx)("br",{}),"Revice su conexi\xf3n"]})})}):Object(h.jsx)("div",{className:N.a.errorContainer,children:Object(h.jsx)("div",{children:Object(h.jsx)("span",{children:t})})})}function S(){var e=w("posts?_embed&slug="+Object(j.h)().newSlug),t=e.newsList,n=e.error;return e.isLoading?Object(h.jsx)(O,{}):n?Object(h.jsx)(C,{err:n}):Object(h.jsx)(h.Fragment,{children:t.map((function(e){return Object(h.jsx)("div",{className:_.a.detailsContainer,children:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:_.a.imageContainer,children:Object(h.jsx)("img",{width:800,height:420,src:e._embedded["wp:featuredmedia"][0].media_details.sizes.full.source_url,alt:e.title.rendered})}),Object(h.jsx)("h2",{dangerouslySetInnerHTML:{__html:e.title.rendered}}),Object(h.jsxs)("ul",{className:_.a.meta,children:[Object(h.jsxs)("li",{children:[Object(h.jsx)(l.b,{size:15})," ",Object(h.jsx)("span",{children:e._embedded.author[0].name})]}),Object(h.jsxs)("li",{children:[Object(h.jsx)(l.a,{size:15})," ",Object(h.jsx)("span",{children:new Date(e.date).toLocaleDateString()})]})]}),Object(h.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content.rendered}})]})},e.id)}))})}var L=n(28);function D(){return new URLSearchParams(Object(j.g)().search)}var I=n(20),B=n.n(I);function y(e){var t=e.noticia;return Object(h.jsx)("li",{className:B.a.newCard,children:Object(h.jsxs)(o.b,{to:"/news/"+t.slug,children:[Object(h.jsx)("img",{width:150,height:150,className:B.a.newImage,src:t._embedded["wp:featuredmedia"]?t._embedded["wp:featuredmedia"][0].media_details.sizes.thumbnail.source_url:"null.jpg",alt:t.title.rendered}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{dangerouslySetInnerHTML:{__html:t.title.rendered}}),Object(h.jsxs)("div",{className:B.a.date,children:[Object(h.jsx)(l.a,{size:15}),Object(h.jsx)("span",{children:new Date(t.date).toLocaleDateString()})]})]})]})})}var E=n(14),G=n.n(E);function z(){var e=Object(a.useState)(1),t=Object(g.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)([]),r=Object(g.a)(c,2),i=r[0],o=r[1],j=D().get("search");Object(a.useEffect)((function(){s(1),o([])}),[j]);var l=j?"posts?_embed&search="+j+"&page=".concat(n):"posts?_embed&page=".concat(n),d=w(l),b=d.newsList,u=d.error,x=d.isLoading,_=d.totalPages;return Object(a.useEffect)((function(){1===n&&o([]),o((function(e){return[].concat(Object(L.a)(e),Object(L.a)(b))}))}),[b]),x||(console.log(i),console.log(j),console.log(l),console.log(_),console.log(b),console.log("Page: "+n)),x&&1===n?Object(h.jsx)(O,{}):u?Object(h.jsx)(C,{err:u}):Object(h.jsxs)("div",{className:G.a.newsGrid,children:[Object(h.jsx)("ul",{children:i.map((function(e){return Object(h.jsx)(y,{noticia:e},e.id)}))}),Object(h.jsx)("div",{className:G.a.loadMoreButton,children:_!==n&&Object(h.jsx)("button",{disabled:!!x,className:x?G.a.btnDisable:G.a.btnEnable,onClick:function(){return s(n+1)},children:x?"Cargando...":"Cargar m\xe1s"})})]})}var A=n(15),T=n.n(A);function k(){var e=D().get("search"),t=Object(a.useState)(""),n=Object(g.a)(t,2),s=n[0],c=n[1],r=Object(j.f)();Object(a.useEffect)((function(){c(e||"")}),[e]);return Object(h.jsx)("form",{className:T.a.searchContainer,onSubmit:function(e){e.preventDefault(),r.push("/?search="+s)},children:Object(h.jsxs)("div",{className:T.a.searchBox,children:[Object(h.jsx)("input",{className:T.a.searchInput,type:"text",value:s,onChange:function(e){return c(e.target.value)}}),Object(h.jsx)("button",{className:T.a.searchButton,type:"submit",children:Object(h.jsx)(d.a,{size:20})})]})})}function M(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(k,{}),Object(h.jsx)(z,{})]})}function F(){return Object(h.jsxs)(o.a,{children:[Object(h.jsx)("header",{children:Object(h.jsx)(o.b,{to:"/",children:Object(h.jsx)("h1",{className:i.a.title,children:"Tiempo21 Noticias"})})}),Object(h.jsx)("main",{className:i.a.siteContainer,children:Object(h.jsxs)(j.c,{children:[Object(h.jsx)(j.a,{exact:!0,path:"/news/:newSlug",children:Object(h.jsx)(S,{})}),Object(h.jsx)(j.a,{path:"/",children:Object(h.jsx)(M,{})})]})}),Object(h.jsxs)("footer",{className:i.a.footer,children:["\xa9 ",(new Date).getFullYear()," ",Object(h.jsx)("br",{})," Tiempo21 - Radio Victoria, Las Tunas, Cuba."]})]})}n(46);c.a.render(Object(h.jsx)(F,{}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.8e19ffec.chunk.js.map