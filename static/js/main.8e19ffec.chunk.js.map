{"version":3,"sources":["components/NewsGrid.module.css","components/Search.module.css","App.module.css","pages/NewDetails.module.css","components/NewCard.module.css","components/Spinner.module.css","components/Error.module.css","components/Spinner.jsx","hooks/useFetch.jsx","components/Error.jsx","pages/NewDetails.jsx","hooks/useQuery.jsx","components/NewCard.jsx","components/NewsGrid.jsx","components/Search.jsx","pages/LandingPage.jsx","App.jsx","index.js"],"names":["module","exports","Spinner","className","styles","spinner","spinning","size","useFetch","url","useState","totalPages","setTotalPages","error","setError","newsList","setNewsList","isLoading","setIsLoading","fullUrl","useEffect","a","fetch","then","res","ok","Error","headers","get","json","data","catch","err","message","fetchData","errorContainer","NewDetails","useParams","newSlug","map","noticia","detailsContainer","imageContainer","width","height","src","_embedded","media_details","sizes","full","source_url","alt","title","rendered","dangerouslySetInnerHTML","__html","meta","author","name","Date","date","toLocaleDateString","content","id","useQuery","URLSearchParams","useLocation","search","NewCard","newCard","to","slug","newImage","thumbnail","NewsGrid","page","setPage","noticias","setNoticias","searchUrl","console","log","newsGrid","loadMoreButton","disabled","btnDisable","btnEnable","onClick","Search","searchText","setSearchText","history","useHistory","searchContainer","onSubmit","e","preventDefault","push","searchBox","searchInput","type","value","onChange","target","searchButton","LandingPage","App","siteContainer","exact","path","footer","getFullYear","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8e19ffec.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"newsGrid\":\"NewsGrid_newsGrid__1f2Ay\",\"loadMoreButton\":\"NewsGrid_loadMoreButton__1axxA\",\"btnEnable\":\"NewsGrid_btnEnable__2LKgf\",\"btnDisable\":\"NewsGrid_btnDisable__DRyYT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchContainer\":\"Search_searchContainer__3zXIn\",\"searchBox\":\"Search_searchBox__2e2o5\",\"searchButton\":\"Search_searchButton__26uDe\",\"searchInput\":\"Search_searchInput__2uLKN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"App_title__-GfWs\",\"siteContainer\":\"App_siteContainer__VZkNZ\",\"footer\":\"App_footer__29Fsv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detailsContainer\":\"NewDetails_detailsContainer__29sGA\",\"imageContainer\":\"NewDetails_imageContainer__36Ay6\",\"meta\":\"NewDetails_meta__InY4e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"newCard\":\"NewCard_newCard__2gsec\",\"newImage\":\"NewCard_newImage__KUeBI\",\"date\":\"NewCard_date__K9sxS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"Spinner_spinner__1XGpJ\",\"spinning\":\"Spinner_spinning__3-n4e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorContainer\":\"Error_errorContainer__3Vt-q\"};","import { FaSpinner } from \"react-icons/fa\";\nimport styles from \"./Spinner.module.css\";\n\nexport function Spinner() {\n  return (\n    <div className={styles.spinner}>\n      <FaSpinner className={styles.spinning} size={60} />\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\n\nconst API_URL = \"https://www.tiempo21.cu/wp-json/wp/v2/\";\n\nexport function useFetch(url) {\n  const [totalPages, setTotalPages] = useState(1);\n  const [error, setError] = useState(null);\n  const [newsList, setNewsList] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const fullUrl = API_URL + url;\n\n  useEffect(() => {\n    setIsLoading(true);\n    const fetchData = async () => {\n      await fetch(fullUrl)\n        .then((res) => {\n          if (!res.ok) {\n            throw Error(\n              \"Ups... Lo sentimos, al parecer el servicio de noticias no está funcionando.\"\n            );\n          }\n          setTotalPages(res.headers.get(\"x-wp-totalpages\"));\n          return res.json();\n        })\n        .then((data) => {\n          setNewsList(data);\n          setIsLoading(false);\n          setError(null);\n        })\n        .catch((err) => {\n          setNewsList([]);\n          setIsLoading(false);\n          setError(err.message);\n        });\n    };\n    fetchData();\n  }, [fullUrl]);\n\n  return { newsList, error, isLoading, totalPages };\n}\n","import styles from \"./Error.module.css\";\n\nexport function Error({ err }) {\n  if (err === \"Failed to fetch\") {\n    return (\n      <div className={styles.errorContainer}>\n        <div>\n          <span>\n            No se pudo conectar con la web de noticias. <br />\n            Revice su conexión\n          </span>\n        </div>\n      </div>\n    );\n  }\n  return (\n    <div className={styles.errorContainer}>\n      <div>\n        <span>{err}</span>\n      </div>\n    </div>\n  );\n}\n","import { useParams } from \"react-router-dom\";\nimport { FiCalendar, FiUser } from \"react-icons/fi\";\nimport { Spinner } from \"../components/Spinner\";\nimport styles from \"./NewDetails.module.css\";\nimport { useFetch } from \"../hooks/useFetch\";\nimport { Error } from \"../components/Error\";\n\nexport function NewDetails() {\n  const { newSlug } = useParams();\n  const url = \"posts?_embed&slug=\" + newSlug;\n\n  const { newsList, error, isLoading } = useFetch(url);\n\n  if (isLoading) {\n    return <Spinner />;\n  }\n\n  if (error) {\n    return <Error err={error} />;\n  }\n\n  return (\n    <>\n      {newsList.map((noticia) => {\n        return (\n          <div key={noticia.id} className={styles.detailsContainer}>\n            <div>\n              <div className={styles.imageContainer}>\n                <img\n                  width={800}\n                  height={420}\n                  src={\n                    noticia._embedded[\"wp:featuredmedia\"][0].media_details.sizes\n                      .full.source_url\n                  }\n                  alt={noticia.title.rendered}\n                />\n              </div>\n              <h2\n                dangerouslySetInnerHTML={{ __html: noticia.title.rendered }}\n              ></h2>\n              <ul className={styles.meta}>\n                <li>\n                  <FiUser size={15} />{\" \"}\n                  <span>{noticia._embedded.author[0].name}</span>\n                </li>\n                <li>\n                  <FiCalendar size={15} />{\" \"}\n                  <span>{new Date(noticia.date).toLocaleDateString()}</span>\n                </li>\n              </ul>\n              <div\n                dangerouslySetInnerHTML={{ __html: noticia.content.rendered }}\n              ></div>\n            </div>\n          </div>\n        );\n      })}\n    </>\n  );\n}\n","import { useLocation } from \"react-router-dom\";\n\nexport function useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n","import { Link } from \"react-router-dom\";\nimport styles from \"./NewCard.module.css\";\nimport { FiCalendar } from \"react-icons/fi\";\n\nexport function NewCard({ noticia }) {\n  return (\n    <li className={styles.newCard}>\n      <Link to={\"/news/\" + noticia.slug}>\n        <img\n          width={150}\n          height={150}\n          className={styles.newImage}\n          src={ noticia._embedded[\"wp:featuredmedia\"] ?\n            noticia._embedded[\"wp:featuredmedia\"][0].media_details.sizes\n              .thumbnail.source_url : \"null.jpg\"\n          }\n          alt={noticia.title.rendered}\n        />\n        <div>\n          <h3 dangerouslySetInnerHTML={{ __html: noticia.title.rendered }}></h3>\n          <div className={styles.date}>\n            <FiCalendar size={15} />\n            <span>{new Date(noticia.date).toLocaleDateString()}</span>\n          </div>\n        </div>\n      </Link>\n    </li>\n  );\n}\n","import { useFetch } from \"../hooks/useFetch\";\nimport { useQuery } from \"../hooks/useQuery\";\nimport { Error } from \"./Error\";\nimport { NewCard } from \"./NewCard\";\nimport { Spinner } from \"./Spinner\";\nimport styles from \"./NewsGrid.module.css\";\nimport { useEffect, useState } from \"react\";\n\nexport function NewsGrid() {\n  const [page, setPage] = useState(1);\n  const [noticias, setNoticias] = useState([]);\n\n  const query = useQuery();\n  const search = query.get(\"search\");\n  \n  useEffect(() => {\n    setPage(1);\n    setNoticias([]);\n  }, [search]);\n\n  const searchUrl = search\n    ? \"posts?_embed&search=\" + search + `&page=${page}`\n    : `posts?_embed&page=${page}`;\n\n  const { newsList, error, isLoading, totalPages } = useFetch(searchUrl);\n\n  useEffect(() => {\n    if (page === 1) {\n      setNoticias([]);\n    }\n    setNoticias((noticias) => [...noticias, ...newsList]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [newsList]);\n\n  if (!isLoading) {\n    console.log(noticias);\n    console.log(search);\n    console.log(searchUrl);\n    console.log(totalPages);\n    console.log(newsList);\n    console.log(\"Page: \" + page);\n  }\n\n  if (isLoading && page === 1) {\n    return <Spinner />;\n  }\n\n  if (error) {\n    return <Error err={error} />;\n  }\n\n  return (\n    <div className={styles.newsGrid}>\n      <ul>\n        {noticias.map((noticia) => {\n          return <NewCard key={noticia.id} noticia={noticia} />;\n        })}\n      </ul>\n      <div className={styles.loadMoreButton}>\n        {totalPages !== page && (\n          <button disabled={isLoading ? true : false} className={isLoading ? styles.btnDisable : styles.btnEnable} onClick={() => setPage(page + 1)}>\n            {isLoading ? \"Cargando...\" : \"Cargar más\"}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","import styles from \"./Search.module.css\";\nimport { FaSearch } from \"react-icons/fa\";\nimport { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useQuery } from \"../hooks/useQuery\";\n\nexport function Search() {\n  const query = useQuery();\n  const search = query.get(\"search\");\n\n  const [searchText, setSearchText] = useState(\"\");\n  const history = useHistory();\n\n  useEffect(() => {\n    setSearchText(search || \"\");\n  }, [search]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    history.push(\"/?search=\" + searchText);\n  };\n\n  return (\n    <form className={styles.searchContainer} onSubmit={handleSubmit}>\n      <div className={styles.searchBox}>\n        <input\n          className={styles.searchInput}\n          type=\"text\"\n          value={searchText}\n          onChange={(e) => setSearchText(e.target.value)}\n        />\n        <button className={styles.searchButton} type=\"submit\">\n          <FaSearch size={20} />\n        </button>\n      </div>\n    </form>\n  );\n}\n","import { NewsGrid } from \"../components/NewsGrid\";\nimport { Search } from \"../components/Search\";\n\nexport function LandingPage() {\n  return (\n    <div>\n      <Search />\n      <NewsGrid />\n    </div>\n  );\n}\n","import styles from \"./App.module.css\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport { NewDetails } from \"./pages/NewDetails\";\nimport { LandingPage } from \"./pages/LandingPage\";\n\nexport function App() {\n  return (\n    <Router>\n      <header>\n        <Link to=\"/\">\n          <h1 className={styles.title}>Tiempo21 Noticias</h1>\n        </Link>\n      </header>\n      <main className={styles.siteContainer}>\n        <Switch>\n          <Route exact path=\"/news/:newSlug\">\n            <NewDetails />\n          </Route>\n          <Route path=\"/\">\n            <LandingPage />\n          </Route>\n        </Switch>\n      </main>\n      <footer className={styles.footer}>\n        © {new Date().getFullYear()} <br /> Tiempo21 - Radio Victoria, Las\n        Tunas, Cuba.\n      </footer>\n    </Router>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}